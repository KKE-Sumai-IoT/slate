#新しいデバイスへの対応案内(後編)

##予約エンドポイントの特徴と恩恵

2022年に実装された予約エンドポイントへの対応または乗り換えを推奨しています。
予約エンドポイントでは、APIのコール方法などがシンプルになる他、以下のメリットがあります。

**対象デバイスの拡大**  
予約のエンドポイントでは、これまでデバイスの種類毎に分かれていた幾つかのエンドポイントを統合しています。
予約エンドポイントの利用により、連携可能なデバイスが拡大されます。

**ユニバーサルアクセスキーの利用**  
新しく増えた認証方法に、リーズナブルに対応するための機能が追加されています。
ユニバーサルアクセスキーというURLにのみ対応すれば、デバイス毎の認証方法を気にせず
カギ発行をすることができます。

**プールPINの利用**  
また、今後計画されているプールPIN機能により、利用直前の即時カギ発行に対応ができます。
これまでRemoteLOCKのPINコードは作成から実際にデバイスで利用できるようになるまで
ハートビートという特質でタイムラグが必要になっていました。プールPINでは、
ドロップインのような直前予約や受付でカギ発行する場合でも、タイムラグを意識する必要はなく
即時使えるPINを入手することができます。
この機能は、予約エンドポイントのみで有効になります。



##　予約エンドポイントの移行に向かないパターンや注意点

URL1とURL2は、API Gatewayを利用したラッパーで実現されています。
APIのresponseに入ってくる"links": { }のURLを参照している場合には以下の修正を行なってください。

linkに該当するリソースのURLを、[ サーバーURL（固定）＋エンドポイント＋レスポンスが返すid 】で書き換える。

以下の場合には注意してください。

サブスク型
複数のドアやエリアマネジメント
リンクを参照している。


##予約APIのインテグレーションのパターン（ゲストへの通知・画面表示）

発行したカギを、メールやURLで伝える場合は、[ユニバーサルアクセスキー](https://remotelocksupport.kke.co.jp/hc/ja/articles/15196752920089) を利用します。
当該URLを伝えることで、リンク先画面には、デバイスで利用可能なキー（カギ）が表示されます。

あなたのシステムが、予約者向けのマイページをもっていたり、タブレット画面上でカギ表示をしている場合、
カギ情報も画面上に埋め込みたいケースがあります。
それらの場合は、あなたのシステムの使い方と発行されたアクセスキーのタイプにより表示を出し分けることができます。
デザインパターンの一例となります。

- メール送信の場合
	ユニバーサルアクセスキーをご利用ください。
		参照：
	
- スマホ上のマイページの場合
　　A案：ユニバーサルアクセスキーのリンクを表示します。
　　	参照：

 	B案：access keyとして返却されたカギをタイプ毎に画面に表示します。
 		参照：
	
- タブレット等
　　A案：ユニバーサルアクセスキー（URL）を作成し、それをQRコード化して表示します。
　　	あ
 	B案：access keyとして返却されたカギをタイプ毎に画面に表示します。
 		あ

- 印字での対応の場合
	access keyとして返却されたカギをタイプ毎を印字[]()

- カードキーの読み取り・登録機能を有しているシステムの場合
	事前にアクセスキータイプを確認の上で
　　
カギタイプ毎の表示は以下のように進めて



